import L from"./OnboardingLayout-Wz1K43jI.js";import M from"./SignIn-DxJXxM88.js";import A from"./MainGoal-Cr0GZyrm.js";import g from"./GenderAge-D6jMDbRn.js";import G from"./Activity-Bs5Zr61v.js";import N from"./HeightWeight-CxL0AFS8.js";import j from"./GoalWeight-CKhgEIlx.js";import B from"./Review-CZj6cbJk.js";import O from"./Nutribution-C4IQW7GP.js";import P from"./PaywallModal-oHRWPYDU.js";import U from"./SignInModal-CA8DEZj_.js";import{Q as $,k as n,x as D,c as p,d as E,o as d,w as R,a as f,P as V}from"./app-CvYeMjMh.js";import{s as W,g as H}from"./auth-Dgskx2uG.js";import"./index-CpCCuq2T.js";import"./HeaderOnboarding-B9NQA-y-.js";import"./ApplicationLogo-C6qnfg6D.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EmailModal-B1ckrlkK.js";import"./helpers-BIkqR0Wr.js";import"./tracking-Ch4ie_Zk.js";import"./calculation-D4R8Ilcq.js";const ge={__name:"Index",setup(Q){const v=$(),r=n(v.props.source);function l(o,e){if(document.getElementById(e))return;const t=document.createElement("script");t.src=o,t.id=e,t.async=!0,document.head.appendChild(t)}r.value==="get-premium"?l("/scripts/meta.js","meta-pixel"):r.value==="tt-get-premium"?l("/scripts/tiktok.js","tiktok-pixel"):r.value==="ga-get-premium"&&l("/scripts/ga.js","ga-script");const h=n(!1),i=n(!1),a=n(!1),c=n(!1),u=new URLSearchParams(window.location.search).get("code");u?(c.value=!0,W(u)):_();const S=()=>{console.log("handleAccepted")};async function _(){localStorage.getItem("accessToken")&&(h.value=!0,H().then(()=>{const e=localStorage.getItem("group_name"),C=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"].every(x=>{const m=localStorage.getItem(x);return m!==null&&m.trim()!==""});(e==="vip"||C)&&(i.value=!0)}))}const y=n({goal:null,current_weight:null,current_height:null,measure_type:null}),k={SignIn:M,MainGoal:A,GenderAge:g,HeightWeight:N,Activity:G,GoalWeight:j,Review:B,Nutribution:O},s=n("MainGoal");localStorage.removeItem("noSignIn");const w=D(()=>k[s.value]||g);function I(o,e={},t=!1){e.showIntro=t,e.goal?s.value=e.goal==="healthy"?"Nutribution":o:s.value=o}const b=o=>{login(o),a.value=!1};return(o,e)=>c.value?E("",!0):(d(),p(L,{key:0},{default:R(()=>[(d(),p(V(w.value),{userData:y.value,source:r.value,onChangeScreen:I},null,40,["userData","source"])),f(P,{visible:i.value,backgroundUrl:"/images/onboarding/modal/bg_premium_modal.png",onClose:e[0]||(e[0]=t=>i.value=!1),onAccepted:S,onShowSignInModal:e[1]||(e[1]=t=>a.value=!0)},null,8,["visible"]),f(U,{visible:a.value,onClose:e[2]||(e[2]=t=>a.value=!1),onLogin:b},null,8,["visible"])]),_:1}))}};export{ge as default};
