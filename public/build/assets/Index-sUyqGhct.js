import x from"./OnboardingLayout-BPq3fN8l.js";import L from"./SignIn-CUKBUcmQ.js";import A from"./MainGoal-DLixIEr-.js";import g from"./GenderAge-DtIJGYmn.js";import G from"./Activity-CvZyRurc.js";import N from"./HeightWeight-B-wUJPd1.js";import j from"./GoalWeight-CewjPdgG.js";import B from"./Review-AhaUUDQM.js";import O from"./Nutribution-vaYsJP4p.js";import U from"./PaywallModal-CfEbanKB.js";import $ from"./SignInModal-Cvp0mO6H.js";import{Q as D,k as n,x as E,c as p,d as P,o as d,w as R,a as f,M as V}from"./app-CbQVik0u.js";import{s as W,g as H}from"./auth-9ycFSHjR.js";import"./index-xgA_mPAQ.js";import"./HeaderOnboarding-DqqCxtS3.js";import"./ApplicationLogo-B2cxmIvD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EmailModal-DoltbQeM.js";import"./helpers-BIkqR0Wr.js";import"./tracking-28t4KSHx.js";import"./calculation-D4R8Ilcq.js";const ge={__name:"Index",setup(Q){const v=D(),r=n(v.props.source);function l(o,e){if(document.getElementById(e))return;const t=document.createElement("script");t.src=o,t.id=e,t.async=!0,document.head.appendChild(t)}r.value==="get-premium"?l("/scripts/meta.js","meta-pixel"):r.value==="tt-get-premium"?l("/scripts/tiktok.js","tiktok-pixel"):r.value==="ga-get-premium"&&l("/scripts/ga.js","ga-script");const h=n(!1),i=n(!1),a=n(!1),c=n(!1),u=new URLSearchParams(window.location.search).get("code");u?(c.value=!0,W(u)):_();const S=()=>{console.log("handleAccepted")};async function _(){localStorage.getItem("accessToken")&&(h.value=!0,H().then(()=>{const e=localStorage.getItem("group_name"),C=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"].every(M=>{const m=localStorage.getItem(M);return m!==null&&m.trim()!==""});(e==="vip"||C)&&(i.value=!0)}))}const y=n({goal:null,current_weight:null,current_height:null,measure_type:null}),k={SignIn:L,MainGoal:A,GenderAge:g,HeightWeight:N,Activity:G,GoalWeight:j,Review:B,Nutribution:O},s=n("MainGoal");localStorage.removeItem("noSignIn");const w=E(()=>k[s.value]||g);function I(o,e={},t=!1){e.showIntro=t,e.goal?s.value=e.goal==="healthy"?"Nutribution":o:s.value=o}const b=o=>{login(o),a.value=!1};return(o,e)=>c.value?P("",!0):(d(),p(x,{key:0},{default:R(()=>[(d(),p(V(w.value),{userData:y.value,source:r.value,onChangeScreen:I},null,40,["userData","source"])),f(U,{visible:i.value,backgroundUrl:"/images/onboarding/modal/bg_premium_modal.png",onClose:e[0]||(e[0]=t=>i.value=!1),onAccepted:S,onShowSignInModal:e[1]||(e[1]=t=>a.value=!0)},null,8,["visible"]),f($,{visible:a.value,onClose:e[2]||(e[2]=t=>a.value=!1),onLogin:b},null,8,["visible"])]),_:1}))}};export{ge as default};
