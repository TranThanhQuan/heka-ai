import{k as h,h as b,b as f,o as _,a as v,e as o,u as i,Z as x,g as m,d as I,t as y,F as S}from"./app-CDwncWqQ.js";import{e as w}from"./tracking-cM1pk6uz.js";import{u as P}from"./auth-BBPb10mp.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers-BIkqR0Wr.js";const M={class:"min-h-screen flex items-center justify-center bg-[#e2ebfb]"},A={class:"text-center px-4 py-8 sm:px-6 sm:py-10 max-w-md w-11/12"},T={class:"text-base sm:text-lg text-left mb-6 space-y-2"},U={key:0,id:"email"},B={class:"text-black break-all"},H=["href"],L={__name:"Success",props:{sessionId:String},setup(N){let r=h(""),a=h(""),g=localStorage.getItem("checkoutId");localStorage.removeItem("checkoutId"),localStorage.getItem("payment_redirect_from"),localStorage.removeItem("payment_redirect_from");const u=new URLSearchParams(window.location.search).get("id"),k=localStorage.getItem("accessToken");if(!u||!g||u!==g)window.location.href="/";else{const t=parseInt(localStorage.getItem("checkoutCount"))||0;localStorage.setItem("checkoutCount",t+1);const e=localStorage.getItem("package_id");localStorage.removeItem("package_id");const s=localStorage.getItem("goal");let l="";s==="lose"?l="onboarding_lose":s==="maintain"?l="onboarding_maintain":s==="gain"?l="onboarding_gain":s==="healthy"?l="onboarding_healthy":l="home_scr_pro_icon",w("iap_successfull",{convert_number:t+1,purchase_package_id:e,source:l});const p=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"],c={};p.forEach(n=>{const d=localStorage.getItem(n);d!==null&&d!==""&&(c[n]=d)}),p.every(n=>n in c)&&k&&P(c)}return r.value=localStorage.getItem("email"),b(()=>{if(result)a.value=result.clickURL;else{const t=navigator.userAgent;if(t.includes("iPhone")||t.includes("iPad")||t.includes("iPod"))a.value="https://apps.apple.com/app/heka-ai-calorie-counter/id6747111547";else if(t.includes("Android"))a.value="https://play.google.com/store/apps/details?id=com.heka.ai.caloriecounter.mealplan&hl=en";else{const e=(void 0).split(",");t.includes("iPhone")||t.includes("iPad")||t.includes("iPod")||t.includes("Android"),a.value=e[Math.floor(Math.random()*e.length)]}}}),(t,e)=>(_(),f(S,null,[v(i(x),{title:"Subscription Activated"}),o("div",M,[o("div",A,[e[3]||(e[3]=o("h4",{class:"text-lg sm:text-xl font-bold mb-4"},[m(" Thanks for being amazing with Heka AI."),o("br"),m(" Let's start your plan now! ")],-1)),e[4]||(e[4]=o("a",{href:"/"},[o("img",{src:"/images/icon.png",alt:"Heka Logo",class:"w-20 h-20 mx-auto my-4"})],-1)),o("ol",T,[e[1]||(e[1]=o("li",null,"1. Click on the link below to download Heka AI",-1)),e[2]||(e[2]=o("li",null,'2. Open the app and select "Sign in"',-1)),i(r)?(_(),f("li",U,[e[0]||(e[0]=m(" 3. Use your sign-up email: ")),o("strong",B,y(i(r)),1)])):I("",!0)]),o("a",{href:i(a),class:"block w-full bg-indigo-600 text-white font-semibold text-sm py-2.5 rounded-lg hover:bg-indigo-700 transition duration-200"}," Download Heka ",8,H),e[5]||(e[5]=o("a",{href:"/",class:"text-indigo-600 text-sm hover:text-indigo-800 block mt-3"},"Back to home",-1))])])],64))}},z=C(L,[["__scopeId","data-v-e7b67689"]]);export{z as default};
