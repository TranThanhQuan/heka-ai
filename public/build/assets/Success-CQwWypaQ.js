import{k as m,h as p,b as f,o as g,a as h,e as t,u as n,Z as _,g as d,d as v,t as k,F as w}from"./app-BWeXoa2B.js";import{u as y}from"./auth-BqUqKjCL.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";function b(i,a=null){let o=localStorage.getItem("redirectUri");o?o=o.split("/").filter(Boolean).pop():o=window.location.pathname.split("/").filter(Boolean).pop();const s={event_name:i,event_data:a?JSON.stringify(a):null,path:o};console.log("payload event tracking: ",s)}const I={class:"min-h-screen flex items-center justify-center bg-[#e2ebfb]"},S={class:"text-center px-4 py-6 max-w-md w-full"},B={class:"text-lg text-left mb-6 space-y-1"},M={key:0,id:"email"},P={class:"text-black"},A=["href"],U={__name:"Success",props:{sessionId:String},setup(i){const a=i;let o=m(""),s=m("");const c=localStorage.getItem("accessToken");if(!c)window.location.href="/";else{b("payment_success",{sessionId:a.sessionId,email:o.value,downloadUrl:s.value,accessToken:c});const l=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"],e={};l.forEach(u=>{const r=localStorage.getItem(u);r!==null&&r!==""&&(e[u]=r)}),console.log("👉 data truyền đi:",e),y(e)}return o.value=localStorage.getItem("email"),o.value||(document.getElementById("email").style.display="none"),p(()=>{if(result)s.value=result.clickURL;else{const l=navigator.userAgent;if(l.includes("iPhone")||l.includes("iPad")||l.includes("iPod"))s.value=void 0;else if(l.includes("Android"))s.value=void 0;else{const e=(void 0).split(",");l.includes("iPhone")||l.includes("iPad")||l.includes("iPod")||l.includes("Android"),s.value=e[Math.floor(Math.random()*e.length)]}}}),(l,e)=>(g(),f(w,null,[h(n(_),{title:"Subscription Activated"}),t("div",I,[t("div",S,[e[3]||(e[3]=t("h4",{class:"text-xl font-bold mb-4"},[d(" Thanks for being amazing with Heka AI."),t("br"),d(" Let's start your plan now! ")],-1)),e[4]||(e[4]=t("a",{href:"/"},[t("img",{src:"/images/icon.png",alt:"Heka Logo",class:"w-20 h-20 mx-auto my-4"})],-1)),t("ol",B,[e[1]||(e[1]=t("li",null,"1. Click on the link below to download Heka AI",-1)),e[2]||(e[2]=t("li",null,'2. Open the app and select "Sign in"',-1)),n(o)?(g(),f("li",M,[e[0]||(e[0]=d(" 3. Use your sign-up email: ")),t("strong",P,k(n(o)),1)])):v("",!0)]),t("a",{href:n(s),class:"block w-full text-white btn-download"}," Download Heka ",8,A),e[5]||(e[5]=t("a",{href:"/",class:"text-indigo-600 text-sm hover:text-indigo-800 block mt-2"},"Back to home",-1))])])],64))}},V=x(U,[["__scopeId","data-v-1c02d672"]]);export{V as default};
