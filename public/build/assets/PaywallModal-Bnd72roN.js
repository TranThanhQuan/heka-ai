import{k as c,b as f,o as v,a as m,w as y,d as x,G as I,e as l,K as C,C as S,F as M}from"./app-ZqQ0ut5E.js";import{a as E}from"./auth-DFN4XU40.js";import N from"./SignInModal-CYhtk48x.js";import P from"./EmailModal-CVJ54CQ1.js";import{e as i}from"./tracking-C0FP2swF.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"relative z-10 flex flex-col items-center text-center text-white p-6"},L={class:"grid grid-cols-2 gap-2 w-full mx-auto price-option",style:{"padding-top":"21rem"}},R=["src"],B=["src"],K={__name:"PaywallModal",props:{visible:Boolean,backgroundUrl:{type:String,required:!0}},emits:["close","accepted","showSignInModal","showEmailModal","headerModal"],setup(d,{emit:h}){const r=c(!1),g=c(!1),a=h,n=c("12months"),b={"1month":"price_1Rv9KoRCSaeQZuQ8X3z9HPcZ","12months":"price_1Rv9L2RCSaeQZuQ8UYdpvLun"},s=(o=!1)=>{i("iap_close_click"),localStorage.getItem("group_name")==="vip"?window.location.href="/":a("close",o)},w=()=>{const o=b[n.value];localStorage.setItem("priceId",o);const e=localStorage.getItem("goal");let t="";e==="lose"?t="onboarding_lose":e==="maintain"?t="onboarding_maintain":e==="gain"?t="onboarding_gain":e==="healthy"?t="onboarding_healthy":t="home_scr_pro_icon";const p=parseInt(localStorage.getItem("iapClickCount"))||0;if(localStorage.setItem("iapClickCount",p+1),i("iap_btn_click",{convert_number:p+1,package_id:o,source:t}),localStorage.getItem("noSignIn")==="true"){a("showEmailModal"),s();return}if(!localStorage.getItem("accessToken")){a("showSignInModal"),s();return}E(o),a("accepted",o)},u=o=>{o==="12months"?i("iap_yearly_click"):o==="1month"&&i("iap_monthly_click"),n.value=o},_=o=>{console.log(o)},k=()=>{isLoggedIn.value=!0,r.value=!1};return(o,e)=>(v(),f(M,null,[m(S,{name:"fade"},{default:y(()=>[d.visible?(v(),f("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full h-full overflow-x-hidden overflow-y-auto bg-black bg-opacity-70",onKeydown:I(s,["esc"])},[l("div",{class:"modal-paywall relative w-full max-w-[250px] mx-auto rounded-2xl overflow-hidden shadow-lg",style:C({background:`url('${d.backgroundUrl}') no-repeat center center/cover`})},[l("button",{onClick:e[0]||(e[0]=t=>s(!0)),class:"absolute top-3 right-3 z-20 w-6 h-6 text-white bg-black bg-opacity-40 hover:bg-opacity-70 rounded-full flex items-center justify-center text-xs"}," âœ• "),l("div",z,[l("div",L,[l("div",{onClick:e[1]||(e[1]=t=>u("1month")),class:"cursor-pointer"},[l("img",{src:n.value==="1month"?"/images/onboarding/modal/1month_active.png":"/images/onboarding/modal/1month.png",alt:"1 month",class:"w-full"},null,8,R)]),l("div",{onClick:e[2]||(e[2]=t=>u("12months")),class:"cursor-pointer"},[l("img",{src:n.value==="12months"?"/images/onboarding/modal/12months_active.png":"/images/onboarding/modal/12months.png",alt:"12 months",class:"w-full"},null,8,B)])]),l("button",{onClick:w,class:"mt-2 w-full bg-gradient-to-r from-yellow-300 to-yellow-500 text-black font-bold py-2 rounded-xl shadow-md"}," Go Premium Now ")])],4)],32)):x("",!0)]),_:1}),m(N,{visible:r.value,onClose:e[3]||(e[3]=t=>r.value=!1),onLogin:k},null,8,["visible"]),m(P,{visible:g.value,onClose:e[4]||(e[4]=t=>g.value=!1),onEmail:_},null,8,["visible"])],64))}},F=$(K,[["__scopeId","data-v-9bff7522"]]);export{F as default};
