import{k as c,x as B,D as H,l as Y,b,o as w,e as t,g as p,a as z,w as F,n as O,t as y,m as q,q as E,F as P}from"./app-DpKzVPuc.js";import{e as R}from"./tracking-DQoKBMjN.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"w-full md:w-1/3 mx-auto overflow-y-auto pb-28 px-4"},Q={class:"relative flex items-start"},X={class:"absolute left-[30%] top-2 max-w-md py-2 px-4 text-left text-lg shadow-lg rounded-2xl bg-white flex items-center mr-1 md:mr-10 box-message"},Z=["innerHTML"],ee={key:1,class:"text-sm"},te={class:"max-h-[47vh] xl:max-h-[52vh] overflow-y-auto pb-16 xl:pb-6 goal-weight-options"},ae={class:"flex flex-col mt-6 px-4"},le={class:"w-1/2 mx-auto"},se={class:"flex flex-col gap-3 px-4"},oe={class:"flex items-center justify-center bg-gray-50 border border-gray-300 rounded-full px-4 py-0 space-x-4 md:w-4/5 w-full mx-auto"},ne={class:"text-lg font-semibold w-16 text-center border-b border-gray-300"},ie={class:"fixed bottom-0 left-0 right-0 z-40 shadow bg-white pb-2 px-4"},re={class:"flex items-center justify-center px-4 py-2"},ue=["disabled"],ce={__name:"GoalWeight",props:{userData:Object},emits:["change-screen"],setup(I,{emit:C}){const s=I,k=C,_=c(s.userData.measure_type==="imperial"),d=c(s.userData.current_weight??(_.value?130:50)),f=c([]),u=c(""),i=c(!1),l=c(localStorage.getItem("duration")??1),r=c(localStorage.getItem("unit")??"month"),V=[{value:"month",label:"Month"},{value:"week",label:"Week"},{value:"year",label:"Year"}];B(()=>V.filter(o=>o.value!==r.value));const m=c(s.userData.current_weight);s.userData.goal==="lose"?f.value=Array.from({length:m.value-1},(o,e)=>({name:(e+1).toString(),value:e+1})):s.userData.goal==="gain"&&(f.value=Array.from({length:700-m.value-1},(o,e)=>({name:(m.value+e+1).toString(),value:m.value+e+1}))),(()=>{const{measure_type:o,current_weight:e,goal:n}=s.userData;if(!o||!e||!n)return;let a=e;o==="imperial"?a=n==="lose"?Math.max(1,e-8):Math.min(e+8,700):a=n==="lose"?Math.max(1,e-4):Math.min(e+4,360),d.value=a,s.userData.goal_weight=a})(),H([d,l,r],()=>{const{measure_type:o,current_weight:e,goal:n}=s.userData,a=Number(d.value);if(i.value=!1,u.value="",!o||!n||!e||!l.value)return;const g=n==="lose",D=n==="gain";if(o==="imperial"?g&&a>=e||D&&a<=e?(i.value=!0,u.value=`You want to <span class="font-bold ">${n}</span> weight, so pick a <span class="font-bold">${g?"lower":"higher"}</span> weight.`):(a<1||a>700)&&(i.value=!0,u.value=" Weight must be 1–700 lbs."):g&&a>=e||D&&a<=e?(i.value=!0,u.value=`You want to <span class="font-bold ">${n}</span> weight, so pick a <span class="font-bold">${g?"lower":"higher"}</span> weight.`):(a<1||a>360)&&(i.value=!0,u.value=" Weight must be 1–360 kg."),!i.value){let v=Math.abs(a-e);o==="imperial"&&(v*=.453592);const L=r.value==="month"?l.value*30:r.value==="week"?l.value*7:l.value*365,U=v/L*7,h=n==="gain"?"gaining":"losing",$=o==="imperial",W=$?"lb":"kg",x=$?v/.453592:v,S=Number.isInteger(x)?x.toString():x.toFixed(1),M=r.value==="month"?`${l.value} month${l.value>1?"s":""}`:r.value==="week"?`${l.value} week${l.value>1?"s":""}`:`${l.value} year${l.value>1?"s":""}`;if(U>1.5)u.value=`Hey, <span class="font-bold text-red-600">${h}</span> <span class="font-bold text-red-600">${S}${W}</span> in <span class="font-bold text-red-600">${M}</span> is pretty fast.`,i.value=!0;else{const j=h.charAt(0).toUpperCase()+h.slice(1);u.value=`Awesome progress!<span class="font-bold"> ${j} ${S}${W}</span> in <span class="font-bold">${M}</span> is safe and healthy.`}}setTimeout(()=>{const v=document.querySelector('.vue-scroll-picker-item[aria-selected="true"]');v&&v.classList.toggle("invalid-weight",i.value)},10)});const G=()=>l.value++,N=()=>{l.value>1&&l.value--},T=()=>{R("goal_weight_next_click"),localStorage.setItem("goal_weight",d.value),localStorage.setItem("duration",l.value),localStorage.setItem("unit",r.value),s.userData.goal_weight=d.value,s.userData.duration=l.value,s.userData.unit=r.value,k("change-screen","Review",s.userData,!0)},A=()=>{k("change-screen","HeightWeight",s.userData,!1)};return(o,e)=>{const n=Y("VueScrollPicker");return w(),b(P,null,[t("div",K,[t("div",{class:"flex items-center mb-2 h-8"},[t("button",{onClick:A,class:"mr-2 bg-gray-200 rounded-full p-1"},e[2]||(e[2]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])),e[3]||(e[3]=t("div",{class:"w-full bg-gray-200 rounded-full h-2"},[t("div",{class:"bg-blue-500 h-2 rounded-full",style:{width:"80%"}})],-1))]),t("div",Q,[t("div",X,[u.value?(w(),b("div",{key:0,innerHTML:u.value,class:"text-sm"},null,8,Z)):(w(),b("div",ee,e[4]||(e[4]=[t("p",null,[p("What's your "),t("strong",null,"goal?"),p(" Let me help customize for you.")],-1)])))]),e[5]||(e[5]=t("div",{class:"ml-0 sm:ml-5 mt-3 goal-weight-gif"},[t("img",{src:"/images/onboarding/gif/info_guide.gif",alt:"Activity Guide",class:"w-1/3"})],-1))]),e[10]||(e[10]=t("hr",{class:"my-2"},null,-1)),t("div",te,[t("div",ae,[e[6]||(e[6]=t("label",{class:"text-gray-900 font-medium"},"Weight",-1)),t("div",le,[z(n,{options:f.value,modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a)},{default:F(({option:a,selected:g})=>[t("div",{class:O([g?"text-2xl font-bold":"text-2xl",g&&i.value?"text-red-500":"text-black"])},y(a.name)+" "+y(_.value?"Ib":"kg"),3)]),_:1},8,["options","modelValue"])])]),t("div",se,[e[9]||(e[9]=t("label",{class:"text-gray-900 font-medium"},"Duration",-1)),t("div",oe,[t("button",{onClick:N,class:"text-xl text-gray-500 hover:text-black"}," − "),t("div",ne,y(l.value),1),t("button",{onClick:G,class:"text-xl text-gray-500 hover:text-black"}," + "),e[8]||(e[8]=t("div",{class:"w-px h-6 bg-gray-300 mx-2"},null,-1)),q(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),class:"bg-transparent text-gray-700 focus:outline-none cursor-pointer border-none focus:border-none"},e[7]||(e[7]=[t("option",{value:"month",selected:""},"Month",-1),p(),t("option",{value:"week"},"Week",-1),p(),t("option",{value:"year"},"Year",-1)]),512),[[E,r.value]])])])])]),t("div",ie,[t("div",re,[t("button",{onClick:T,disabled:i.value,class:"w-full md:w-1/4 text-white font-medium rounded-full text-sm px-5 py-2.5 mb-2 transition focus:outline-none focus:ring-4 focus:ring-gray-300 disabled:opacity-50 disabled:cursor-not-allowed bg-black hover:bg-gray-900 btn-next"}," Next ",8,ue)])])],64)}}},pe=J(ce,[["__scopeId","data-v-0207830d"]]);export{pe as default};
