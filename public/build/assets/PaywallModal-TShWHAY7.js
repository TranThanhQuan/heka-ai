import{k as m,b as f,o as v,a as d,w as x,d as C,G as I,e as l,K as S,C as M,F as E}from"./app-CJVY-Isr.js";import{a as N}from"./auth-x0J3KE4x.js";import P from"./SignInModal-uPeKsOOu.js";import $ from"./EmailModal-CD17jH-R.js";import{e as s}from"./tracking-DQoKBMjN.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers-BIkqR0Wr.js";const B={class:"relative z-10 flex flex-col items-center text-center text-white p-6"},L={class:"grid grid-cols-2 gap-2 w-full mx-auto price-option",style:{"padding-top":"21rem"}},R=["src"],K=["src"],Q={__name:"PaywallModal",props:{visible:Boolean,backgroundUrl:{type:String,required:!0},forceClose:{type:Boolean,default:!1}},emits:["close","accepted","showSignInModal","showEmailModal","headerModal"],setup(i,{emit:h}){const r=m(!1),u=m(!1),b=i,a=h,n=m("12months"),w={"1month":"price_1Rv9KoRCSaeQZuQ8X3z9HPcZ","12months":"price_1Rv9L2RCSaeQZuQ8UYdpvLun"},c=(o=!1)=>{if(s("iap_close_click"),localStorage.getItem("group_name")==="vip"){window.location.href="/";return}console.log(o),b.forceClose||!o?a("close",!0):window.location.href="/"},_=()=>{const o=w[n.value];localStorage.setItem("priceId",o);const e=localStorage.getItem("goal");let t="";e==="lose"?t="onboarding_lose":e==="maintain"?t="onboarding_maintain":e==="gain"?t="onboarding_gain":e==="healthy"?t="onboarding_healthy":t="home_scr_pro_icon";const p=parseInt(localStorage.getItem("iapClickCount"))||0;if(localStorage.setItem("iapClickCount",p+1),s("iap_btn_click",{convert_number:p+1,package_id:o,source:t}),localStorage.getItem("noSignIn")==="true"){a("showEmailModal");return}if(!localStorage.getItem("accessToken")){a("showSignInModal"),c();return}N(o),a("accepted",o)},g=o=>{o==="12months"?s("iap_yearly_click"):o==="1month"&&s("iap_monthly_click"),n.value=o},k=o=>{console.log(o)},y=()=>{isLoggedIn.value=!0,r.value=!1};return(o,e)=>(v(),f(E,null,[d(M,{name:"fade"},{default:x(()=>[i.visible?(v(),f("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full h-full overflow-x-hidden overflow-y-auto bg-black bg-opacity-70",onKeydown:I(c,["esc"])},[l("div",{class:"modal-paywall relative w-[20%] h-[90vh] mx-auto rounded-2xl overflow-hidden shadow-lg",style:S({background:`url('${i.backgroundUrl}') no-repeat center center/cover`})},[l("button",{onClick:e[0]||(e[0]=t=>c(!0)),class:"absolute top-3 right-3 z-20 w-6 h-6 text-white bg-black bg-opacity-40 hover:bg-opacity-70 rounded-full flex items-center justify-center text-xs"}," âœ• "),l("div",B,[l("div",L,[l("div",{onClick:e[1]||(e[1]=t=>g("1month")),class:"cursor-pointer"},[l("img",{src:n.value==="1month"?"/images/onboarding/modal/1month_active.png":"/images/onboarding/modal/1month.png",alt:"1 month",class:"w-full mx-auto"},null,8,R)]),l("div",{onClick:e[2]||(e[2]=t=>g("12months")),class:"cursor-pointer"},[l("img",{src:n.value==="12months"?"/images/onboarding/modal/12months_active.png":"/images/onboarding/modal/12months.png",alt:"12 months",class:"w-full mx-auto"},null,8,K)])]),l("button",{onClick:_,class:"mt-4 w-full bg-gradient-to-r from-yellow-300 to-yellow-500 text-black font-bold py-2 rounded-xl shadow-md btn-go-premium"}," Go Premium Now ")])],4)],32)):C("",!0)]),_:1}),d(P,{visible:r.value,onClose:e[3]||(e[3]=t=>r.value=!1),onLogin:y},null,8,["visible"]),d($,{visible:u.value,onClose:e[4]||(e[4]=t=>u.value=!1),onEmail:k},null,8,["visible"])],64))}},q=z(Q,[["__scopeId","data-v-4c30ae2d"]]);export{q as default};
