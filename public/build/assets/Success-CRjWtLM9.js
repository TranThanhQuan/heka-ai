import{k as m,h as f,b as g,o as p,a as _,e as o,u as r,Z as k,g as n,d as v,t as I,F as w}from"./app-i6J69JfU.js";import{e as h}from"./tracking-cM1pk6uz.js";import{u as b,g as x}from"./auth-pMpYANX5.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers-BIkqR0Wr.js";const y={class:"min-h-screen flex items-center justify-center bg-[#e2ebfb]"},P={class:"text-center px-4 py-8 sm:px-6 sm:py-10 max-w-md w-11/12"},M={class:"text-base sm:text-lg text-left mb-6 space-y-2"},U={key:0,id:"email"},C={class:"text-black break-all"},T=["href"],A={__name:"Success",props:{sessionId:String},setup(E){let i=m(""),l=m("");localStorage.getItem("checkoutId"),localStorage.removeItem("checkoutId"),localStorage.getItem("payment_redirect_from"),new URLSearchParams(window.location.search).get("id");const d=localStorage.getItem("accessToken"),c=new URLSearchParams(window.location.search).get("session_id");if(!c)window.location.href="/";else{if(c){const s=`https://api-heka.dev.apero.vn/api/v1/payment/verify-checkout-session?session_id=${c}`;$.ajax({url:s,method:"GET",success:function(t){t.success&&(localStorage.getItem("email")?i.value=localStorage.getItem("email"):i.value=t.data.customerEmail,h("iap_successfull",{convert_number:a+1,price_id:localStorage.getItem("priceId"),source:localStorage.getItem("source")}),h("confirm_purchased_with_store",{pi_id:t.data.pi_id||null,invoice_id:t.data.invoiceId||null,subscription_id:t.data.subscriptionId||null,customerId:t.data.customerId||null,value:Math.round(t.data.amountTotal)/100||null,original_price:Math.round(t.data.amountSubtotal)/100||null,currency:t.data.currency||null,price_id:localStorage.getItem("priceId")||null}))},error:function(t,H,N){swal({title:"Error",text:"Something went wrong, please try again later",icon:"error"}).then(()=>{window.location.href="/"})}})}const a=parseInt(localStorage.getItem("checkoutCount"))||0;localStorage.setItem("checkoutCount",a+1),localStorage.getItem("package_id"),localStorage.removeItem("package_id");const e=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"],u={};e.forEach(s=>{const t=localStorage.getItem(s);t!==null&&t!==""&&(u[s]=t)}),e.every(s=>s in u)&&d&&b(u)}return d&&(x(),i.value=localStorage.getItem("email")),f(()=>{if(result)l.value=result.clickURL;else{const a=navigator.userAgent;if(a.includes("iPhone")||a.includes("iPad")||a.includes("iPod"))l.value="https://apps.apple.com/app/heka-ai-calorie-counter/id6747111547";else if(a.includes("Android"))l.value="https://play.google.com/store/apps/details?id=com.heka.ai.caloriecounter.mealplan&hl=en";else{const e="https://apps.apple.com/app/heka-ai-calorie-counter/id6747111547".split(",");a.includes("iPhone")||a.includes("iPad")||a.includes("iPod")||a.includes("Android"),l.value=e[Math.floor(Math.random()*e.length)]}}}),(a,e)=>(p(),g(w,null,[_(r(k),{title:"Subscription Activated"}),o("div",y,[o("div",P,[e[5]||(e[5]=o("h4",{class:"text-lg sm:text-xl font-bold mb-4"},[n(" Thanks for being amazing with Heka AI."),o("br"),n(" Let's start your plan now! ")],-1)),e[6]||(e[6]=o("a",{href:"/"},[o("img",{src:"/images/icon.png",alt:"Heka Logo",class:"w-20 h-20 mx-auto my-4"})],-1)),o("ol",M,[e[3]||(e[3]=o("li",null,"1. Click on the link below to download Heka AI",-1)),e[4]||(e[4]=o("li",null,'2. Open the app and select "Sign in"',-1)),r(i)?(p(),g("li",U,[e[0]||(e[0]=n(" 3. Use your sign-up email: ",-1)),e[1]||(e[1]=o("br",null,null,-1)),e[2]||(e[2]=n()),o("strong",C,I(r(i)),1)])):v("",!0)]),o("a",{href:r(l),class:"block w-full bg-indigo-600 text-white font-semibold text-sm py-2.5 rounded-lg hover:bg-indigo-700 transition duration-200"}," Download Heka ",8,T),e[7]||(e[7]=o("a",{href:"/",class:"text-indigo-600 text-sm hover:text-indigo-800 block mt-3"},"Back to home",-1))])])],64))}},z=S(A,[["__scopeId","data-v-86dd7146"]]);export{z as default};
