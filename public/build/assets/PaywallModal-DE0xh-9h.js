import{k as s,h as S,L as C,b,o as w,a as u,w as M,d as E,G as $,e as a,M as N,C as B,F as P}from"./app-04A9xdO1.js";import{a as z}from"./auth-Dgskx2uG.js";import L from"./SignInModal-CNYp8faO.js";import T from"./EmailModal-gg3AIb9F.js";import{e as i}from"./tracking-Ch4ie_Zk.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers-BIkqR0Wr.js";const j={class:"relative z-10 flex flex-col items-center text-center text-white p-6 paywall-content"},F={class:"grid grid-cols-2 gap-2 w-full mx-auto price-option",style:{"padding-top":"21rem"}},G=["src"],K=["src"],U={__name:"PaywallModal",props:{visible:Boolean,backgroundUrl:{type:String,required:!0},forceClose:{type:Boolean,default:!1}},emits:["close","accepted","showSignInModal","showEmailModal","headerModal"],setup(r,{emit:y}){const g=s({}),c=s(!1),p=s(!1),_=r,l=y,n=s("12months");S(async()=>{const e=(await C.get("https://api-heka.apero.vn/api/v1/payment/products/prices")).data.data,t={};e.forEach(d=>{var v;const h=(v=d.recurring)==null?void 0:v.interval;h==="month"?t["1month"]=d.id:h==="year"&&(t["12months"]=d.id)}),g.value=t});const m=(o=!1)=>{if(i("iap_close_click"),localStorage.getItem("group_name")==="vip"){window.location.href="/";return}_.forceClose||!o?l("close",!0):window.location.href="/"},k=()=>{const o=g.value[n.value];localStorage.setItem("priceId",o);const e=localStorage.getItem("goal");e==="lose"?localStorage.setItem("source","onboarding_lose"):e==="maintain"?localStorage.setItem("source","onboarding_maintain"):e==="gain"?localStorage.setItem("source","onboarding_gain"):e==="healthy"?localStorage.setItem("source","onboarding_healthy"):localStorage.setItem("source","home_scr_pro_icon");const t=parseInt(localStorage.getItem("iapClickCount"))||0;if(localStorage.setItem("iapClickCount",t+1),i("iap_btn_click",{convert_number:t+1,package_id:o,source:localStorage.getItem("source")}),localStorage.getItem("noSignIn")==="true"){l("showEmailModal");return}if(!localStorage.getItem("accessToken")){l("showSignInModal"),m();return}z(o),l("accepted",o)},f=o=>{o==="12months"?i("iap_yearly_click"):o==="1month"&&i("iap_monthly_click"),n.value=o},I=o=>{console.log(o)},x=()=>{isLoggedIn.value=!0,c.value=!1};return(o,e)=>(w(),b(P,null,[u(B,{name:"fade"},{default:M(()=>[r.visible?(w(),b("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full h-full overflow-x-hidden overflow-y-auto bg-black bg-opacity-70",onKeydown:$(m,["esc"])},[a("div",{class:"modal-paywall relative w-[20%] h-[90vh] mx-auto rounded-2xl shadow-lg",style:N({background:`url('${r.backgroundUrl}') no-repeat center center/cover`})},[a("button",{onClick:e[0]||(e[0]=t=>m(!0)),class:"absolute top-3 right-3 z-20 w-6 h-6 text-white bg-black bg-opacity-40 hover:bg-opacity-70 rounded-full flex items-center justify-center text-xs"}," âœ• "),a("div",j,[a("div",F,[a("div",{onClick:e[1]||(e[1]=t=>f("1month")),class:"cursor-pointer"},[a("img",{src:n.value==="1month"?"/images/onboarding/modal/1month_active.png":"/images/onboarding/modal/1month.png",alt:"1 month",class:"w-full mx-auto"},null,8,G)]),a("div",{onClick:e[2]||(e[2]=t=>f("12months")),class:"cursor-pointer"},[a("img",{src:n.value==="12months"?"/images/onboarding/modal/12months_active.png":"/images/onboarding/modal/12months.png",alt:"12 months",class:"w-full mx-auto"},null,8,K)])]),a("button",{onClick:k,class:"mt-4 w-full bg-gradient-to-r from-yellow-300 to-yellow-500 text-black font-bold py-2 rounded-xl shadow-md btn-go-premium"}," Go Premium Now ")])],4)],32)):E("",!0)]),_:1}),u(L,{visible:c.value,onClose:e[3]||(e[3]=t=>c.value=!1),onLogin:x},null,8,["visible"]),u(T,{visible:p.value,onClose:e[4]||(e[4]=t=>p.value=!1),onEmail:I},null,8,["visible"])],64))}},Q=V(U,[["__scopeId","data-v-dacb392d"]]);export{Q as default};
