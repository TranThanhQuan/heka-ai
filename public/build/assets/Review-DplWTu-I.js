import{k as h,h as K,x as S,b as r,o as i,e,a as M,d as y,w as P,g as B,C as R,t as g,K as U,u as C,F as $,p as O}from"./app-4r_1vnc9.js";import q from"./PaywallModal-BYLkuEXU.js";import J from"./SignInModal-DB8SmMYq.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./auth-5RiTwZMF.js";const X={class:"relative w-full md:w-1/3 mx-auto overflow-y-auto pb-28 px-4",style:{"min-height":"calc(100vh - 100px)"}},Z={key:0,class:"absolute top-0 left-0 w-full h-full z-50 bg-white flex items-center justify-center text-center px-5"},ee={key:0,class:"relative z-10 w-full mx-auto",style:{height:"calc(100vh - 100px)"}},te={class:"flex items-center justify-start"},ae=["src"],oe={class:"h-full overflow-y-auto box-step",style:{"padding-bottom":"6rem"}},se={class:"text-center px-5"},le={class:"flex justify-center p-4"},ne=["src"],re=["innerHTML"],ie={class:"text-center p-0 md:px-5"},ue={class:"font-semibold text-sm text-gray-700 mb-1"},ce={key:0,class:"text-xl my-2 font-bold text-black bg-[#f7f7f7] w-full md:w-2/3 mx-auto rounded-full p-2"},ge={class:"relative w-[220px] h-[110px]"},de=["innerHTML"],me={class:"absolute inset-0 flex flex-col items-center justify-end pb-3"},he={key:0,class:"text-2xl font-bold text-black"},fe={key:1,class:"text-2xl font-bold text-gray-500"},pe={class:"text-gray-500 text-sm"},ve={key:0,class:"text-center text-sm font-medium bg-[#f4f4f4] w-full md:w-2/3 mx-auto rounded-full p-2 mt-2"},_e={key:1,class:"text-center text-sm font-medium bg-[#f4f4f4] w-full md:w-2/3 mx-auto rounded-full p-2 mt-2 text-red-500"},ye={key:2,class:"bg-gray-50 rounded-xl mt-2 p-4 w-full md:w-2/3 mx-auto"},we={class:"font-semibold text-gray-800 mb-4"},xe=["src","alt"],be={class:"text-gray-700 font-medium"},ke={class:"fixed bottom-0 left-0 right-0 z-50 bg-white shadow pb-4"},De={class:"flex items-center justify-center px-4 py-2"},Ie={__name:"Review",props:{userData:{type:Object,required:!0}},emits:["change-screen"],setup(W,{emit:Y}){const w=h(!1),f=h(!1);K(()=>{x.value?setTimeout(()=>{x.value=!1,w.value=!0},3e3):w.value=!0});const s=W,x=h(s.userData.showIntro??!0),b=Y,k=h(!1);let d=!1;const p=h(""),A=()=>{d?b("change-screen","GoalWeight",s.userData,!1):(s.userData.goal==="lose"?p.value="/images/onboarding/modal/bg_lose_modal.png":s.userData.goal==="gain"?p.value="/images/onboarding/modal/bg_gain_modal.png":s.userData.goal==="maintain"&&(p.value="/images/onboarding/modal/bg_maintain_modal.png"),k.value=!0,G())},H=a=>{console.log("Price ID:",a)},N=()=>{f.value=!1},z=()=>{s.userData.goal==="maintain"?b("change-screen","HeightWeight",s.userData,!1):b("change-screen","GoalWeight",s.userData,!1)},v=S(()=>{let{gender:a,year_of_birth:t,current_weight:o,current_height:n,goal:u,goal_weight:c,duration:m,activity:F,measure_type:V}=s.userData;V==="imperial"&&(o=o*.453592,n=n,c=c*.453592);const L=new Date().getFullYear()-parseInt(t);let I=0;a==="male"?I=10*o+6.25*n-5*L+5:I=10*o+6.25*n-5*L-161;const _=new Date;_.setDate(_.getDate()+1);const T=new Date(_);T.setMonth(T.getMonth()+parseInt(m));const E=Math.round((T-_)/(1e3*60*60*24));let j=0;return(u==="gain"||u==="lose")&&(j=(c-o)/E*7700),Math.round(I*parseFloat(F)+j)}),D=S(()=>{const a=new Date;a.setDate(a.getDate()+1);const t=new Date(a);return t.setMonth(t.getMonth()+parseInt(s.userData.duration)),t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),l=S(()=>{const a=s.userData.goal,t=s.userData.current_weight;let o=s.userData.goal_weight,n=s.userData.measure_type;s.userData.goal==="maintain"&&(o=t,localStorage.setItem("goal_weight",t)),G();let u='<svg width="220" height="120" viewBox="0 0 220 120" xmlns="http://www.w3.org/2000/svg"> <rect width="100%" height="100%" fill="#e6ebfd" /> <path d="M 20 100 A 90 90 0 0 1 200 100" stroke="#1a1a1a" stroke-width="12" fill="none" stroke-linecap="round" /> <circle cx="200" cy="100" r="8" fill="#1a1a1a" stroke="white" stroke-width="4" /> </svg>',c="";if(n==="imperial"?c=`${t} lb → ${o} lb`:c=`${t} KG → ${o} KG`,v.value<0)return d=!0,v.value=0,u=`<svg width="220" height="120" viewBox="0 0 220 120" xmlns="http://www.w3.org/2000/svg">
        <!-- Background -->
        <rect width="100%" height="100%" fill="#f8f8f8" />

        <!-- Gauge path -->
        <path
            d="M 20 100 A 90 90 0 0 1 200 100"
            stroke="#d4d4d4"
            stroke-width="12"
            fill="none"
            stroke-linecap="round"
        />

        <!-- Start circle (at 20,100 approx) -->
        <circle cx="20" cy="100" r="8" fill="#d4d4d4" stroke="white" stroke-width="4" />
        </svg>`,{backIcon:"/images/onboarding/back_arrow.png",handImage:"/images/onboarding/error.png",calorieBg:"#f4f4f4",introText:"Can't calculate your daily calories. <br> Please update your main goal to continue.",encouragement:`You've got this! Goal day: ${D.value}`,svg:u,dailyGoalLabel:"Daily Goal Calories",healthTip:"Adjust your plan to stay healthy!",stepsTitle:"What you can do:",steps:"",buttonText:"Go Back",goalWeightText:c};const m={backIcon:"/images/onboarding/back_arrow.png",handImage:"/images/onboarding/review_hand.png",calorieBg:"#e3e9fb",svg:u,dailyGoalLabel:"Daily Goal Calories",stepsTitle:"Steps to hit your goal:",steps:[{img:"/images/onboarding/food.png",text:"Track your food everyday"},{img:"/images/onboarding/SneakerMove.png",text:"Don’t forget to track your activity"}],buttonText:"Next",goalWeightText:c};return a==="lose"?{...m,healthTip:"Great move for your health 💪",introText:"Thanks for logging your goals. You're one step closer to your transformation.",encouragement:`You've got this! Goal day: ${D.value}`}:a==="gain"?{...m,healthTip:"A Wise move to gain healthy weight.",introText:"Great job setting your goals! You're on the path to gaining healthy weight.",encouragement:`Let's do this! Target date: ${D.value}`}:{...m,healthTip:"Smart step to stay balanced.",introText:"Thanks for logging your goals. You're one step closer to your transformation.",encouragement:"Eat smart to maintain your weight."}}),G=()=>{const a=s.userData??{},t=parseInt(a.duration??"0"),o=c=>c.toISOString().split("T")[0],n=new Date,u=new Date(n);u.setMonth(u.getMonth()+t),localStorage.setItem("activity",a.activity??""),localStorage.setItem("goal",a.goal??""),localStorage.setItem("gender",a.gender??""),localStorage.setItem("year_of_birth",a.year_of_birth??""),localStorage.setItem("measure_type",a.measure_type??""),localStorage.setItem("current_weight",a.current_weight??""),localStorage.setItem("current_height",a.current_height??""),localStorage.setItem("target_cal",v.value??""),a.goal!="maintain"?localStorage.setItem("goal_weight",a.goal_weight??""):localStorage.setItem("goal_weight",a.current_weight??""),localStorage.setItem("start_date",o(n)),localStorage.setItem("end_date",o(u))};return(a,t)=>(i(),r($,null,[e("div",X,[M(R,{name:"fade"},{default:P(()=>[x.value?(i(),r("div",Z,t[4]||(t[4]=[e("div",null,[e("img",{src:"/images/onboarding/gif/info_guide.gif",alt:"Intro",class:"w-1/3 mx-auto mb-4"}),e("p",{class:"text-lg"},[B(" Congrats! Your account is all set. "),e("br"),B(" Enjoy your "),e("strong",null,"journey with Heka! ")])],-1)]))):y("",!0)]),_:1}),w.value?(i(),r("div",ee,[e("div",te,[e("img",{onClick:t[0]||(t[0]=o=>z()),src:l.value.backIcon,alt:"back",class:"w-10 h-10 cursor-pointer"},null,8,ae)]),e("div",oe,[e("div",se,[e("div",le,[e("img",{src:l.value.handImage,alt:"thanks",class:"w-2/5 md:w-1/4"},null,8,ne)]),e("div",{class:"text-gray-700 font-medium w-full md:w-4/5 mx-auto",innerHTML:l.value.introText},null,8,re)]),t[5]||(t[5]=e("hr",{class:"my-4 w-4/5 mx-auto"},null,-1)),e("div",ie,[e("p",ue,g(l.value.encouragement),1),s.userData.goal!="maintain"?(i(),r("p",ce,g(l.value.goalWeightText),1)):y("",!0)]),e("div",{style:U({backgroundColor:l.value.calorieBg}),class:"flex justify-center py-5 w-4/5 md:w-2/3 mx-auto rounded-lg mb-5"},[e("div",ge,[e("div",{innerHTML:l.value.svg},null,8,de),e("div",me,[C(d)?(i(),r("p",fe," 0 ")):(i(),r("p",he,g(v.value),1)),e("p",pe,g(l.value.dailyGoalLabel),1)])])],4),C(d)?(i(),r("p",_e," Invalid goal, unable to calculate calories ⚠️ ")):(i(),r("p",ve,g(l.value.healthTip),1)),C(d)?y("",!0):(i(),r("div",ye,[e("p",we,g(l.value.stepsTitle),1),(i(!0),r($,null,O(l.value.steps,(o,n)=>(i(),r("div",{key:n,class:"flex items-center gap-3 bg-white rounded-xl px-4 py-3 mb-3 shadow-sm"},[e("img",{src:o.img,alt:"step-"+n,class:"w-10 h-10 object-contain"},null,8,xe),e("span",be,g(o.text),1)]))),128))]))]),e("div",ke,[e("div",De,[e("button",{type:"button",class:"text-white bg-black hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-full text-sm px-5 py-2.5 w-full sm:w-1/2 md:w-1/4",onClick:A},g(l.value.buttonText),1)])])])):y("",!0)]),M(q,{visible:k.value,backgroundUrl:p.value,onClose:t[1]||(t[1]=o=>k.value=!1),onAccepted:H,onShowSignInModal:t[2]||(t[2]=o=>f.value=!0)},null,8,["visible","backgroundUrl"]),M(J,{visible:f.value,onClose:t[3]||(t[3]=o=>f.value=!1),onLogin:N},null,8,["visible"])],64))}},je=Q(Ie,[["__scopeId","data-v-6922668e"]]);export{je as default};
