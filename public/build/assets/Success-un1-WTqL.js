import{k as f,h as p,b as g,o as m,a as h,e as t,u as n,Z as _,g as d,d as v,t as k,F as w}from"./app-Cyly3V_b.js";import{u as x}from"./auth-5RiTwZMF.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";function y(i,a=null){let l=localStorage.getItem("redirectUri");l?l=l.split("/").filter(Boolean).pop():l=window.location.pathname.split("/").filter(Boolean).pop();const s={event_name:i,event_data:a?JSON.stringify(a):null,path:l};console.log("payload event tracking: ",s)}const S={class:"min-h-screen flex items-center justify-center bg-[#e2ebfb]"},I={class:"text-center px-4 py-6 max-w-md w-full"},M={class:"text-lg text-left mb-6 space-y-1"},P={key:0,id:"email"},A={class:"text-black"},B=["href"],U={__name:"Success",props:{sessionId:String},setup(i){const a=i;let l=f(""),s=f("");const c=localStorage.getItem("accessToken");if(!c)window.location.href="/";else{y("payment_success",{sessionId:a.sessionId,email:l.value,downloadUrl:s.value,accessToken:c});const o=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"],e={};o.forEach(u=>{const r=localStorage.getItem(u);r!==null&&r!==""&&(e[u]=r)}),console.log("👉 data truyền đi:",e),x(e)}return l.value=localStorage.getItem("email"),p(()=>{if(result)s.value=result.clickURL;else{const o=navigator.userAgent;if(o.includes("iPhone")||o.includes("iPad")||o.includes("iPod"))s.value=void 0;else if(o.includes("Android"))s.value=void 0;else{const e=(void 0).split(",");o.includes("iPhone")||o.includes("iPad")||o.includes("iPod")||o.includes("Android"),s.value=e[Math.floor(Math.random()*e.length)]}}}),(o,e)=>(m(),g(w,null,[h(n(_),{title:"Subscription Activated"}),t("div",S,[t("div",I,[e[3]||(e[3]=t("h4",{class:"text-xl font-bold mb-4"},[d(" Thanks for being amazing with Heka AI."),t("br"),d(" Let's start your plan now! ")],-1)),e[4]||(e[4]=t("a",{href:"/"},[t("img",{src:"/images/icon.png",alt:"Heka Logo",class:"w-20 h-20 mx-auto my-4"})],-1)),t("ol",M,[e[1]||(e[1]=t("li",null,"1. Click on the link below to download Heka AI",-1)),e[2]||(e[2]=t("li",null,'2. Open the app and select "Sign in"',-1)),n(l)?(m(),g("li",P,[e[0]||(e[0]=d(" 3. Use your sign-up email: ")),t("strong",A,k(n(l)),1)])):v("",!0)]),t("a",{href:n(s),class:"block w-full text-white btn-download"}," Download Heka ",8,B),e[5]||(e[5]=t("a",{href:"/",class:"text-indigo-600 text-sm hover:text-indigo-800 block mt-2"},"Back to home",-1))])])],64))}},V=b(U,[["__scopeId","data-v-6e57b780"]]);export{V as default};
