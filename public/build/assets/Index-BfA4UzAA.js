import M from"./OnboardingLayout-D6Mr0N5L.js";import x from"./SignIn-DkX9mL2f.js";import L from"./MainGoal-DG6lW_zN.js";import m from"./GenderAge-C_t-8etV.js";import A from"./Activity-Dik7b3Pu.js";import G from"./HeightWeight-BCgBPb5d.js";import j from"./GoalWeight-YR_w5svq.js";import B from"./Review-CnjlOPBE.js";import N from"./Nutribution-BM46TeHw.js";import U from"./PaywallModal-DZqEC8-X.js";import $ from"./SignInModal-CtEjHeNJ.js";import{Q as D,k as n,x as E,c as g,o as p,w as O,a as d,M as P}from"./app-J1oSEXET.js";import{s as R,g as W}from"./auth-BmZ32yQs.js";import"./index-BPfak_on.js";import"./HeaderOnboarding-BlRLiiRx.js";import"./ApplicationLogo-DweNCElB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EmailModal-SNf4WOBZ.js";import"./helpers-BIkqR0Wr.js";import"./tracking-DVxpm9TG.js";import"./calculation-D4R8Ilcq.js";const ue={__name:"Index",setup(H){const f=D(),r=n(f.props.source);function l(o,e){if(document.getElementById(e))return;const t=document.createElement("script");t.src=o,t.id=e,t.async=!0,document.head.appendChild(t)}r.value==="get-premium"?l("/scripts/meta.js","meta-pixel"):r.value==="tt-get-premium"?l("/scripts/tiktok.js","tiktok-pixel"):r.value==="ga-get-premium"&&l("/scripts/ga.js","ga-script");const v=n(!1),i=n(!1),a=n(!1),c=new URLSearchParams(window.location.search).get("code");c?R(c):S();const h=()=>{console.log("handleAccepted")};async function S(){localStorage.getItem("accessToken")&&(v.value=!0,W().then(()=>{const e=localStorage.getItem("group_name"),b=["activity","goal","gender","year_of_birth","measure_type","current_weight","current_height","target_cal","goal_weight","start_date","end_date"].every(C=>{const u=localStorage.getItem(C);return u!==null&&u.trim()!==""});(e==="vip"||b)&&(i.value=!0)}))}const _=n({goal:null,current_weight:null,current_height:null,measure_type:null}),y={SignIn:x,MainGoal:L,GenderAge:m,HeightWeight:G,Activity:A,GoalWeight:j,Review:B,Nutribution:N},s=n("MainGoal");localStorage.removeItem("noSignIn");const k=E(()=>y[s.value]||m);function w(o,e={},t=!1){e.showIntro=t,e.goal?s.value=e.goal==="healthy"?"Nutribution":o:s.value=o}const I=o=>{login(o),a.value=!1};return(o,e)=>(p(),g(M,null,{default:O(()=>[(p(),g(P(k.value),{userData:_.value,source:r.value,onChangeScreen:w},null,40,["userData","source"])),d(U,{visible:i.value,backgroundUrl:"/images/onboarding/modal/bg_premium_modal.png",onClose:e[0]||(e[0]=t=>i.value=!1),onAccepted:h,onShowSignInModal:e[1]||(e[1]=t=>a.value=!0)},null,8,["visible"]),d($,{visible:a.value,onClose:e[2]||(e[2]=t=>a.value=!1),onLogin:I},null,8,["visible"])]),_:1}))}};export{ue as default};
