import{k as i,h as C,L as S,b,o as w,a as u,w as M,d as E,G as $,e as a,M as N,C as B,F as P}from"./app-CPuNsaQu.js";import{a as z}from"./auth-BRbl7ls7.js";import L from"./SignInModal-BzFWL_IB.js";import T from"./EmailModal-BmxWtMQw.js";import{e as r}from"./tracking-cM1pk6uz.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers-BIkqR0Wr.js";const j={class:"relative z-10 flex flex-col items-center text-center text-white p-6 paywall-content"},F={class:"grid grid-cols-2 gap-2 w-full mx-auto price-option",style:{"padding-top":"21rem"}},G=["src"],K=["src"],U={__name:"PaywallModal",props:{visible:Boolean,backgroundUrl:{type:String,required:!0},forceClose:{type:Boolean,default:!1}},emits:["close","accepted","showSignInModal","showEmailModal","headerModal"],setup(c,{emit:y}){const g=i({}),m=i(!1),p=i(!1),_=c,n=y,s=i("12months");C(async()=>{const e=(await S.get("https://api-heka.dev.apero.vn/api/v1/payment/products/prices")).data.data,o={};e.forEach(l=>{var h;const v=(h=l.recurring)==null?void 0:h.interval;v==="month"?o["1month"]=l.id:v==="year"&&(o["12months"]=l.id)}),g.value=o});const d=(t=!1)=>{if(r("iap_close_click"),localStorage.getItem("group_name")==="vip"){window.location.href="/";return}_.forceClose||!t?n("close",!0):window.location.href="/"},k=()=>{const t=g.value[s.value];localStorage.setItem("priceId",t);const e=localStorage.getItem("goal");let o="";e==="lose"?o="onboarding_lose":e==="maintain"?o="onboarding_maintain":e==="gain"?o="onboarding_gain":e==="healthy"?o="onboarding_healthy":o="home_scr_pro_icon";const l=parseInt(localStorage.getItem("iapClickCount"))||0;if(localStorage.setItem("iapClickCount",l+1),r("iap_btn_click",{convert_number:l+1,package_id:t,source:o}),localStorage.getItem("noSignIn")==="true"){n("showEmailModal");return}if(!localStorage.getItem("accessToken")){n("showSignInModal"),d();return}z(t),n("accepted",t)},f=t=>{t==="12months"?r("iap_yearly_click"):t==="1month"&&r("iap_monthly_click"),s.value=t},x=t=>{console.log(t)},I=()=>{isLoggedIn.value=!0,m.value=!1};return(t,e)=>(w(),b(P,null,[u(B,{name:"fade"},{default:M(()=>[c.visible?(w(),b("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full h-full overflow-x-hidden overflow-y-auto bg-black bg-opacity-70",onKeydown:$(d,["esc"])},[a("div",{class:"modal-paywall relative w-[20%] h-[90vh] mx-auto rounded-2xl shadow-lg",style:N({background:`url('${c.backgroundUrl}') no-repeat center center/cover`})},[a("button",{onClick:e[0]||(e[0]=o=>d(!0)),class:"absolute top-3 right-3 z-20 w-6 h-6 text-white bg-black bg-opacity-40 hover:bg-opacity-70 rounded-full flex items-center justify-center text-xs"}," âœ• "),a("div",j,[a("div",F,[a("div",{onClick:e[1]||(e[1]=o=>f("1month")),class:"cursor-pointer"},[a("img",{src:s.value==="1month"?"/images/onboarding/modal/1month_active.png":"/images/onboarding/modal/1month.png",alt:"1 month",class:"w-full mx-auto"},null,8,G)]),a("div",{onClick:e[2]||(e[2]=o=>f("12months")),class:"cursor-pointer"},[a("img",{src:s.value==="12months"?"/images/onboarding/modal/12months_active.png":"/images/onboarding/modal/12months.png",alt:"12 months",class:"w-full mx-auto"},null,8,K)])]),a("button",{onClick:k,class:"mt-4 w-full bg-gradient-to-r from-yellow-300 to-yellow-500 text-black font-bold py-2 rounded-xl shadow-md btn-go-premium"}," Go Premium Now ")])],4)],32)):E("",!0)]),_:1}),u(L,{visible:m.value,onClose:e[3]||(e[3]=o=>m.value=!1),onLogin:I},null,8,["visible"]),u(T,{visible:p.value,onClose:e[4]||(e[4]=o=>p.value=!1),onEmail:x},null,8,["visible"])],64))}},Q=V(U,[["__scopeId","data-v-5c03bc26"]]);export{Q as default};
